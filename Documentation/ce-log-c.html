<article class="doc" id="doc:log-pipeline">
<h1>log-pipeline</h1>
<p>
<span class="func">lputs</span>/<span class="func">lprintf</span> -&gt; <span class="func">log_raw_process</span> -&gt; <span class="func">log_raw_push</span> 
-&gt; <span class="func">log_txt_forw</span> -&gt; <span class="func">log_txt_push</span>
</p>
</article>
<article class="function" id="func:log_raw_listen_add">
<header>
<h1>log_raw_listen_add</h1><h2>listen in on logs</h2>
</header>
<ol class="code">
<li><span class="type">void</span> <span class="identifier">log_raw_listen_add</span> (</li><li class="indent"><span class="type">void (*</span> <span class="param">callb</span><span class="type">)</span> (<span class="args">const char *str</span>)</li>
<li>)</li>
</ol>
<section>
<h1>Arguments</h1>
<p>
<dl>
<dt>callb</dt>
<dd>callback to call when new logs are appended
</dd>
</dl>
</section>
<section>
<h1>Description</h1>
<p>
A line in the log follows the format - "3f:origin.c~3:5:Hello world!\n". 
The "3f" is hexadecimal encoded seconds since the beginning of the program, 
"ce-origin.c~3" is the origin of the log, "5" stands for error level(<span class="const">DBG</span>) 
where a smaller number is of more importance or a more important message, 
these follow the format specified in ce-aux.h.
<br />
Note that the origin part may be overridden to anything that doesn't contain
'\0' and ':' characters.
</p>
</section>
</article>
<article class="function" id="func:log_raw_listen_rm">
<header>
<h1>log_raw_listen_rm</h1><h2>remove a listening callback</h2>
</header>
<ol class="code">
<li><span class="type">int</span> <span class="identifier">log_raw_listen_rm</span> (</li><li class="indent"><span class="type">void (*</span> <span class="param">callb</span><span class="type">)</span> (<span class="args">const char *str</span>)</li>
<li>)</li>
</ol>
<section>
<h1>Arguments</h1>
<p>
<dl>
<dt>callb</dt>
<dd>callback to remove
</dd>
</dl>
</section>
<section>
<h1>Return</h1>
<p>
0 on success
<br />
1 when such callback is not listed
</p>
</section>
</article>
<article class="function" id="func:log_raw_push">
<header>
<h1>log_raw_push</h1><h2>passes the new logs to log_raw_readcb fncs</h2>
</header>
<ol class="code">
<li><span class="type">void</span> <span class="identifier">log_raw_push</span> (</li><li class="indent"><span class="type">int</span> <span class="param">s</span></li>
<li>)</li>
</ol>
<section>
<h1>Arguments</h1>
<p>
<dl>
<dt>s</dt>
<dd>where the new logs start
</dd>
</dl>
</section>
</article>
<article class="function" id="func:log_raw_process">
<header>
<h1>log_raw_process</h1><h2>processes the newly added lines</h2>
</header>
<ol class="code">
<li><span class="type">void</span> <span class="identifier">log_raw_process</span> (</li><li class="indent"><span class="type">int</span> <span class="param">s</span></li>
<li>)</li>
</ol>
<section>
<h1>Arguments</h1>
<p>
<dl>
<dt>s</dt>
<dd>starting position of newly appended lines
</dd>
</dl>
</section>
<section>
<h1>Description</h1>
<p>
Adds timestamps to the lines and ensures line header consistency.
</p>
</section>
</article>
<article class="function" id="func:log_txt_conv">
<header>
<h1>log_txt_conv</h1><h2>convert raw logs into more readable format</h2>
</header>
<ol class="code">
<li><span class="type">void</span> <span class="identifier">log_txt_conv</span> (</li><li class="indent"><span class="type">const char *</span> <span class="param">in</span>,</li>
<li class="indent"><span class="type">int *</span> <span class="param">lend</span>,</li>
<li class="indent"><span class="type">int *</span> <span class="param">llvl</span>,</li>
<li class="indent"><span class="type">void (*</span> <span class="param">out</span><span class="type">)</span> (<span class="args">const char *str, int len, int lvl, void*</span>),</li>
<li class="indent"><span class="type">void *</span> <span class="param">pass</span></li>
<li>)</li>
</ol>
<section>
<h1>Arguments</h1>
<p>
<dl>
<dt>in</dt>
<dd>raw log input string to convert
</dd>
<dt>lend</dt>
<dd>variable holding whether <span class="param">in</span> starts with a new line, initialize 
it to 1; alternatively, if the string is expected not to expand
you can use NULL to disregard keeping this variable between 
calls
</dd>
<dt>llvl</dt>
<dd>variable holding current line's level('1'-'5'), if the string
is not expected to expand you can use <span class="const">NULL</span> to disregard keeping
this variable between calls
</dd>
<dt>out</dt>
<dd>function called for writing the converted text
</dd>
<dt>pass</dt>
<dd>pass a pointer to <span class="param">out</span>
</dd>
</dl>
</section>
</article>
